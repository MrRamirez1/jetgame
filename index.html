<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–æ–º–±–∞—Ä–¥–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–æ—Ç–∏–≤ —Ç–∞–Ω–∫–∞</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background-color: #87CEEB; /* –ì–æ–ª—É–±–æ–µ –Ω–µ–±–æ */
            overflow: hidden;
        }
        #ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 60px;
            background-color: #FFD700; /* –ñ—ë–ª—Ç–∞—è –∑–µ–º–ª—è */
        }
        #airplane {
            position: absolute;
            width: 150px;
            height: 60px;
            background-image: url('https://gazetakolos.ru/wp-content/uploads/2023/01/9-696x264.png');
            background-size: contain;
            background-repeat: no-repeat;
            z-index: 10;
            transform: rotate(0deg);
        }
        #tank {
            position: absolute;
            width: 80px;
            height: 50px;
            bottom: 60px;
            background-image: url('https://www.omgtu.ru/general_information/faculties/faculty_of_economics_and_management/department_of_economics_and_labour_quot/New%20Folder/liga%20dr/2019/tank.png');
            background-size: contain;
            background-repeat: no-repeat;
            z-index: 5;
        }
        .bomb {
            position: absolute;
            width: 20px;
            height: 30px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 30"><ellipse cx="10" cy="8" rx="6" ry="5" fill="%23333"/><path d="M4,8 L16,8 L15,28 L5,28 Z" fill="%23333"/><circle cx="10" cy="20" r="2" fill="%23ccc"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            z-index: 8;
            display: none;
        }
        #score-display {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 24px;
            color: white;
            text-shadow: 1px 1px 2px black;
        }
        #start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            z-index: 20;
        }
        #start-button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 18px;
            background-color: #4CAF50;
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
        }
        #message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 36px;
            color: red;
            text-shadow: 2px 2px 4px black;
            display: none;
            z-index: 15;
        }
        .explosion {
            position: absolute;
            width: 120px; /* –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –≤–∑—Ä—ã–≤ */
            height: 120px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><circle cx="60" cy="60" r="45" fill="%23FF4500"/><circle cx="40" cy="40" r="20" fill="%23FFD700"/><circle cx="80" cy="40" r="18" fill="%23FFD700"/><circle cx="60" cy="80" r="25" fill="%23FFD700"/></svg>');
            background-size: contain;
            z-index: 9;
            display: none;
        }
        #fuel-display {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            color: white;
            text-shadow: 1px 1px 2px black;
        }
        #reload-display {
            position: absolute;
            top: 60px;
            left: 20px;
            font-size: 24px;
            color: white;
            text-shadow: 1px 1px 2px black;
        }
        #audio-control {
            position: absolute;
            bottom: 20px;
            right: 20px;
            padding: 5px 10px;
            background-color: rgba(0,0,0,0.5);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            z-index: 30;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="ground"></div>
        <div id="score-display">–ü–æ–ø–∞–¥–∞–Ω–∏–π: 0</div>
        <div id="fuel-display">–¢–æ–ø–ª–∏–≤–æ: 100%</div>
        <div id="reload-display">–ë–æ–º–±—ã: 5/5</div>
        <div id="airplane"></div>
        <div id="tank"></div>
        <div id="message"></div>
        <div id="start-screen">
            <h1>–ë–æ–º–±–∞—Ä–¥–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–æ—Ç–∏–≤ —Ç–∞–Ω–∫–∞</h1>
            <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: —Å—Ç—Ä–µ–ª–∫–∏ –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è —Å–∞–º–æ–ª–µ—Ç–∞, –ø—Ä–æ–±–µ–ª –¥–ª—è —Å–±—Ä–æ—Å–∞ –±–æ–º–±—ã</p>
            <p>–û—Å—Ç–æ—Ä–æ–∂–Ω–æ! –í–∑—Ä—ã–≤—ã –º–æ–≥—É—Ç –ø–æ–≤—Ä–µ–¥–∏—Ç—å –≤–∞—à —Å–∞–º–æ–ª—ë—Ç</p>
            <button id="start-button">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        </div>
        <button id="audio-control">üîä –í–∫–ª –∑–≤—É–∫</button>
    </div>

    <audio id="bg-music" loop>
        <source src="https://www.youtube.com/audiolibrary_download?vid=pcwwAxKEzmA" type="audio/mpeg">
    </audio>
    <audio id="explosion-sound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-explosion-1684.mp3" type="audio/mpeg">
    </audio>

    <script>
        const gameContainer = document.getElementById('game-container');
        const airplane = document.getElementById('airplane');
        const tank = document.getElementById('tank');
        const scoreDisplay = document.getElementById('score-display');
        const fuelDisplay = document.getElementById('fuel-display');
        const reloadDisplay = document.getElementById('reload-display');
        const startScreen = document.getElementById('start-screen');
        const startButton = document.getElementById('start-button');
        const message = document.getElementById('message');
        const ground = document.getElementById('ground');
        const audioControl = document.getElementById('audio-control');
        const bgMusic = document.getElementById('bg-music');
        const explosionSound = document.getElementById('explosion-sound');
        
        let score = 0;
        let fuel = 100;
        let ammo = 5;
        let maxAmmo = 5;
        let reloadTime = 3000; // 3 —Å–µ–∫—É–Ω–¥—ã –Ω–∞ –ø–µ—Ä–µ–∑–∞—Ä—è–¥–∫—É
        let isReloading = false;
        let gameActive = false;
        let soundOn = false;
        let airplaneX = 50;
        let airplaneY = 50;
        let airplaneDirection = 1;
        let tankX = 200;
        let tankY = window.innerHeight - 110;
        let bombs = [];
        let explosions = [];
        let tankDirection = 1;
        let tankSpeed = 3; // –£–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Ç–∞–Ω–∫–∞
        let keys = {
            ArrowLeft: false,
            ArrowRight: false,
            ArrowUp: false,
            ArrowDown: false,
            ' ': false
        };
        let lastFuelDecrease = 0;
        let lastShotTime = 0;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–π
        function initPositions() {
            airplaneX = 50;
            airplaneY = 50;
            airplaneDirection = 1;
            tankX = 200;
            tankY = window.innerHeight - 110;
            fuel = 100;
            ammo = maxAmmo;
            isReloading = false;
            updatePositions();
            updateFuelDisplay();
            updateAmmoDisplay();
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        function updatePositions() {
            airplane.style.left = `${airplaneX}px`;
            airplane.style.top = `${airplaneY}px`;
            airplane.style.transform = `scaleX(${airplaneDirection})`;
            tank.style.left = `${tankX}px`;
            tank.style.top = `${tankY}px`;
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–ø–ª–∏–≤–∞
        function updateFuelDisplay() {
            fuelDisplay.textContent = `–¢–æ–ø–ª–∏–≤–æ: ${Math.floor(fuel)}%`;
            if (fuel < 20) {
                fuelDisplay.style.color = 'red';
            } else {
                fuelDisplay.style.color = 'white';
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–æ–µ–∑–∞–ø–∞—Å–∞
        function updateAmmoDisplay() {
            reloadDisplay.textContent = `–ë–æ–º–±—ã: ${ammo}/${maxAmmo}`;
            if (ammo === 0) {
                reloadDisplay.style.color = 'red';
            } else {
                reloadDisplay.style.color = 'white';
            }
        }
        
        // –ü–µ—Ä–µ–∑–∞—Ä—è–¥–∫–∞
        function reloadAmmo() {
            if (isReloading) return;
            
            isReloading = true;
            showMessage("–ü–ï–†–ï–ó–ê–†–Ø–î–ö–ê!");
            
            setTimeout(() => {
                ammo = maxAmmo;
                updateAmmoDisplay();
                isReloading = false;
            }, reloadTime);
        }
        
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        document.addEventListener('keydown', (e) => {
            if (e.key in keys) {
                keys[e.key] = true;
                if (e.key === ' ' && gameActive && !isReloading) {
                    const now = Date.now();
                    if (now - lastShotTime > 200) { // –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –≤—ã—Å—Ç—Ä–µ–ª–∞–º–∏
                        dropBomb();
                        lastShotTime = now;
                    }
                }
                e.preventDefault();
            }
        });
        
        document.addEventListener('keyup', (e) => {
            if (e.key in keys) {
                keys[e.key] = false;
            }
        });
        
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤—É–∫–æ–º
        audioControl.addEventListener('click', () => {
            soundOn = !soundOn;
            audioControl.textContent = soundOn ? "üîä –í—ã–∫–ª –∑–≤—É–∫" : "üîä –í–∫–ª –∑–≤—É–∫";
            
            if (soundOn) {
                bgMusic.play().catch(e => console.log("–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ"));
            } else {
                bgMusic.pause();
            }
        });
        
        // –°–±—Ä–æ—Å –±–æ–º–±—ã
        function dropBomb() {
            if (ammo <= 0) {
                reloadAmmo();
                return;
            }
            
            ammo--;
            updateAmmoDisplay();
            
            const bomb = document.createElement('div');
            bomb.className = 'bomb';
            
            const bombX = airplaneX + 75;
            const bombY = airplaneY + 40;
            
            bomb.style.left = `${bombX}px`;
            bomb.style.top = `${bombY}px`;
            bomb.style.display = 'block';
            
            gameContainer.appendChild(bomb);
            
            bombs.push({
                element: bomb,
                x: bombX,
                y: bombY,
                speed: 5 // –£–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø–∞–¥–µ–Ω–∏—è –±–æ–º–±
            });
            
            if (ammo === 0) {
                reloadAmmo();
            }
        }
        
        // –î–≤–∏–∂–µ–Ω–∏–µ —Ç–∞–Ω–∫–∞
        function moveTank() {
            tankX += tankSpeed * tankDirection;
            
            // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –≥—Ä–∞–Ω–∏—Ü—ã
            if (tankX > window.innerWidth - 80) {
                tankDirection = -1;
            } else if (tankX < 0) {
                tankDirection = 1;
            }
            
            // –°–ª—É—á–∞–π–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            if (Math.random() < 0.02) {
                tankDirection *= -1;
            }
            
            // –°–ª—É—á–∞–π–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
            if (Math.random() < 0.03) {
                tankSpeed = 2 + Math.random() * 4;
            }
        }
        
        // –î–≤–∏–∂–µ–Ω–∏–µ –±–æ–º–±
        function moveBombs(timestamp) {
            for (let i = bombs.length - 1; i >= 0; i--) {
                const bomb = bombs[i];
                bomb.y += bomb.speed;
                bomb.element.style.top = `${bomb.y}px`;
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã—Ö–æ–¥–∞ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã
                if (bomb.y > window.innerHeight) {
                    bomb.element.remove();
                    bombs.splice(i, 1);
                    continue;
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ —Ç–∞–Ω–∫
                if (bomb.y >= tankY && bomb.y <= tankY + 50 &&
                    bomb.x >= tankX && bomb.x <= tankX + 80) {
                    hitTarget(bomb.x, bomb.y);
                    bomb.element.remove();
                    bombs.splice(i, 1);
                }
            }
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –≤–∑—Ä—ã–≤–∞
        function createExplosion(x, y) {
            if (soundOn) {
                explosionSound.currentTime = 0;
                explosionSound.play().catch(e => console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–≤—É–∫"));
            }
            
            const explosion = document.createElement('div');
            explosion.className = 'explosion';
            explosion.style.left = `${x - 60}px`;
            explosion.style.top = `${y - 60}px`;
            explosion.style.display = 'block';
            
            gameContainer.appendChild(explosion);
            
            explosions.push({
                element: explosion,
                x: x,
                y: y,
                time: 0
            });
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤–∑—Ä—ã–≤–∞ –ø–æ —Å–∞–º–æ–ª—ë—Ç—É
            checkPlaneDamage(x, y);
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è —Å–∞–º–æ–ª—ë—Ç–∞ –≤–∑—Ä—ã–≤–æ–º
        function checkPlaneDamage(explosionX, explosionY) {
            const explosionRadius = 60;
            const planeCenterX = airplaneX + 75;
            const planeCenterY = airplaneY + 30;
            
            const distance = Math.sqrt(
                Math.pow(planeCenterX - explosionX, 2) + 
                Math.pow(planeCenterY - explosionY, 2)
            );
            
            if (distance < explosionRadius + 40) { // 40 - –ø—Ä–∏–º–µ—Ä–Ω—ã–π —Ä–∞–¥–∏—É—Å —Å–∞–º–æ–ª—ë—Ç–∞
                fuel = Math.max(0, fuel - 20);
                updateFuelDisplay();
                showMessage("–ü–û–í–†–ï–ñ–î–ï–ù–ò–ï!");
                
                if (fuel <= 0) {
                    gameOver();
                }
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∑—Ä—ã–≤–æ–≤
        function updateExplosions() {
            for (let i = explosions.length - 1; i >= 0; i--) {
                explosions[i].time += 16;
                if (explosions[i].time > 500) {
                    explosions[i].element.remove();
                    explosions.splice(i, 1);
                }
            }
        }
        
        // –ü–æ–ø–∞–¥–∞–Ω–∏–µ –≤ —Ü–µ–ª—å
        function hitTarget(x, y) {
            score++;
            fuel = Math.min(100, fuel + 15);
            scoreDisplay.textContent = `–ü–æ–ø–∞–¥–∞–Ω–∏–π: ${score}`;
            updateFuelDisplay();
            
            createExplosion(x, y);
            showMessage("Ramirez6276 –°–∞–º—ã–π –ª—É—á—à–∏–π");
            
            if (score % 3 === 0) {
                tankSpeed += 0.5;
            }
            
            tankX = Math.random() * (window.innerWidth - 80);
        }
        
        // –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ç–æ–ø–ª–∏–≤–∞
        function decreaseFuel(timestamp) {
            if (timestamp - lastFuelDecrease > 1000) {
                fuel = Math.max(0, fuel - 3); // –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —Ä–∞—Å—Ö–æ–¥ —Ç–æ–ø–ª–∏–≤–∞
                updateFuelDisplay();
                lastFuelDecrease = timestamp;
                
                if (fuel <= 0) {
                    gameOver();
                }
            }
        }
        
        // –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã
        function gameOver() {
            gameActive = false;
            showMessage("–¢–æ—Ö—Ç–∞–º—ã—à —Å–Ω–æ–≤–∞ –º–µ–Ω—è —Å–±–∏–ª");
            if (soundOn) bgMusic.pause();
            setTimeout(() => {
                startScreen.style.display = 'flex';
            }, 2000);
        }
        
        // –ü–æ–∫–∞–∑ —Å–æ–æ–±—â–µ–Ω–∏—è
        function showMessage(text) {
            message.textContent = text;
            message.style.display = 'block';
            setTimeout(() => {
                message.style.display = 'none';
            }, 1000);
        }
        
        // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
        function gameLoop(timestamp) {
            if (!gameActive) return;
            
            // –î–≤–∏–∂–µ–Ω–∏–µ —Å–∞–º–æ–ª–µ—Ç–∞ (—É–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å)
            if (keys.ArrowLeft) {
                airplaneX = Math.max(0, airplaneX - 7);
                airplaneDirection = -1;
            }
            if (keys.ArrowRight) {
                airplaneX = Math.min(window.innerWidth - 150, airplaneX + 7);
                airplaneDirection = 1;
            }
            if (keys.ArrowUp) airplaneY = Math.max(0, airplaneY - 5);
            if (keys.ArrowDown) airplaneY = Math.min(window.innerHeight - 60, airplaneY + 5);
            
            moveTank();
            moveBombs(timestamp);
            updateExplosions();
            decreaseFuel(timestamp);
            updatePositions();
            
            requestAnimationFrame(gameLoop);
        }
        
        // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
        function startGame() {
            bombs.forEach(b => b.element.remove());
            bombs = [];
            explosions.forEach(e => e.element.remove());
            explosions = [];
            
            score = 0;
            tankSpeed = 3;
            scoreDisplay.textContent = `–ü–æ–ø–∞–¥–∞–Ω–∏–π: ${score}`;
            initPositions();
            gameActive = true;
            startScreen.style.display = 'none';
            
            if (soundOn) {
                bgMusic.play().catch(e => console.log("–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ"));
            }
            
            requestAnimationFrame(gameLoop);
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ —Å—Ç–∞—Ä—Ç–∞
        startButton.addEventListener('click', startGame);
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
        window.addEventListener('resize', () => {
            if (tankY > window.innerHeight - 110) {
                tankY = window.innerHeight - 110;
            }
            if (airplaneY > window.innerHeight - 60) {
                airplaneY = window.innerHeight - 60;
            }
            updatePositions();
        });
    </script>
</body>
</html>
